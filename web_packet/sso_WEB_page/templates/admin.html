<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tableau de bord — Vaultaire</title>
  <link rel="stylesheet" href="/static/app.css">
</head>
<body>
  <div class="app-layout">
    <aside class="app-sidebar">
      <div class="brand"><img src="/static/image/vaultaire_logo.svg" alt="Vaultaire"> <span>Vaultaire</span></div>
      <nav class="app-sidebar-nav">
        <a href="/admin/tree" {{ if eq .Section "tree" }}class="active"{{ end }}>Arborescence</a>
        <a href="/admin" {{ if eq .Section "dashboard" }}class="active"{{ end }}>Tableau de bord</a>
        <a href="/admin/users" {{ if eq .Section "users" }}class="active"{{ end }}>Utilisateurs</a>
        <a href="/admin/groups" {{ if eq .Section "groups" }}class="active"{{ end }}>Groupes</a>
        <a href="/admin/clients" {{ if eq .Section "clients" }}class="active"{{ end }}>Clients</a>
        <a href="/admin/permissions" {{ if eq .Section "permissions" }}class="active"{{ end }}>Permissions</a>
        {{ if .DnsEnable }}<a href="/admin/dns" {{ if eq .Section "dns" }}class="active"{{ end }}>DNS</a>{{ end }}
        <a href="/profil">Profil</a>
      </nav>
    </aside>
    <main class="app-main">
      <header class="app-topbar">
        <div class="search-wrap">
          <input type="search" class="search-input" id="global-search" placeholder="Rechercher utilisateur, groupe, client…" autocomplete="off">
          <div class="search-results" id="search-results" aria-hidden="true"></div>
        </div>
        <div class="app-toolbar">
          <span class="muted small">{{ .Username }}</span>
          <button type="button" id="theme-toggle" class="btn btn-ghost">Thème</button>
        </div>
      </header>
      <div class="app-content">
        <div class="app-container animate-in">
          <h1>Tableau de bord</h1>
          <p class="muted">Connecté : {{ .Username }} · <a href="/profil">Profil</a></p>

          <section class="section">
            <h2>Exécuter une commande</h2>
            <p class="small muted">Même logique que le CLI. Les permissions sont contrôlées côté serveur.</p>
            <form method="post" action="/admin">
              <label for="command">Commande</label>
              <textarea id="command" name="command" placeholder="Ex: get -u, get -g, status"></textarea>
              <div style="margin-top:0.75rem"><button type="submit" class="btn btn-primary">Exécuter</button></div>
            </form>
          </section>

          <section class="section">
            <h2>Résultat</h2>
            {{ if .Output }}
              <pre class="output">{{ .Output }}</pre>
            {{ else }}
              <p class="muted">Aucun résultat. Exécutez une commande ci-dessus.</p>
            {{ end }}
          </section>
        </div>
      </div>
    </main>
  </div>
  <script src="/static/app.js"></script>
  <script src="/static/admin_sidebar.js"></script>
</body>
</html>
